{% extends 'base.html' %}
{% from 'bootstrap/utils.html' import render_flashed_messages %}
{% block content %}

<style>
  h2, h3, h4 {
    margin: 10px 0px 0px 0px
  }
  #input-amount {
    width: 100px;
  }
</style>

<div id="card-body" style="margin:50px 50px 10px 50px">
  <h3 class="">Name: (( card.billingname )) </h3>
  <h4 class="">Card: (( card.last4 )) (( card.status )) (( card.card_type)) </h4>
  <h4 class="">Email: (( card.email )) </h4>
  <h4 class="">Address: (( card.line1 )) </h4>
  <h4 class="">Telephone: (( card.phone )) </h4>
  <h4 class="">Channel Partner: (( card.channel_partner_id )) </h4>
  <h4 class="">Spending limit: (( "${:,.2f}".format(card.spending_limit_amount/100) ))</h4>

  <div id="card-body" style="margin:10px 0px 10px 0px">
    <a href="/activate_card/(( card.stripe_card_id ))" class="btn btn-primary" role="button">Make initial payment</a>
    <a href="/edit_cardholder/(( card.stripe_card_id ))" class="btn btn-primary" role="button">Edit Cardholder
      information</a>
    {#    <a href="/edit_card_info2/(( card.stripe_card_id ))" class="btn btn-primary" role="button">Update user info for any card</a>#}
  </div>
  <!-- <p></p><a id="edit-account-a" href="/edit_card_info">Edit Card Info</a> -->
</div>

<form name='add-money' class="borderedheaderbutton" action="/add_money" method="POST"
  style="margin:50px 50px 10px 50px">
  <h1 id="h1-current-balance">Current balance: (( "${:,.2f}".format(card.balance/100) )) </h1>
  <h3 id="last4"> <input type="hidden" name="last4" value=((card.last4))> </h3>
  {% with messages = get_flashed_messages() %}
  {% if messages %}
  {% for message in messages %}
  <p>((message))</p>
  {% endfor %}
  {% endif %}
  {% endwith %}

  <h3 id="h1-current-balance"> Amount to add: $<input id="input-amount" type="text" name="amount"> </h3>
  <h4 id="payment-note"> Note: <input type="text" name="paymentnote"> </h4>
  <button class="btn btn-primary" type="submit" value="add">Add Money</button>
</form>

<div class="activity-table">
  <div class="activity-history" style="margin:25px 50px 0px 50px">
    <h3>Activity History</h3>
  </div>
  <div class="table-responsive">
    <table id="activity" class="table" style="margin:10px 50px 10px 25px; max-width:90%;">
      <thead>
        <th style="width:7%">ID</th>
        <th>Date</th>
        <th>Activity Type</th>
        <th>Status</th>
        <th>Merchant Name</th>
        <th>Amount</th>
        <th>Balance</th>
        <th>Note</th>
      </thead>
      <tbody>
        {#      if activity.visible is  none #}
        {% for activity in activities %}
        <tr>
          <td>(( activity.activity_id ))</td>
          <td>(( activity.date ))</td>
          <td>(( activity.activity_type ))</td>
          <td>(( activity.status ))</td>
          <td>(( activity.merchant_name ))</td>
          <td>(( activity.approved ))</td>
          <td>(( "${:,.2f}".format(activity.amount/100) ))</td>
          <td>(( "${:,.2f}".format(activity.balance/100) ))</td>
          <td>(( activity.note ))</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>


{%  endblock %}